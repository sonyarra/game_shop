# GameStore — Интернет-магазин компьютерных игр

## О проекте

Веб-приложение для продажи компьютерных игр с разделением прав доступа (администратор/пользователь). Работа была выполнена в учебных целях.

**Стек технологий:**
- PHP 7.4+
- PostgreSQL 12+
- HTML5/CSS3
- Apache

---

##  Ролевая модель

| Роль | Права |
|------|-------|
| **Пользователь** | Просмотр каталога, фильтрация, добавление в корзину, управление корзиной |
| **Администратор** | Полное управление играми (CRUD), загрузка изображений, управление пользователями |

---

## Структура проекта и функциональность файлов

### Аутентификация и доступ
| Файл | Назначение |
|------|------------|
| `register.php` | Регистрация новых пользователей (валидация email, уникальность логина, хеширование пароля) |
| `login.php` | Авторизация пользователей, создание сессии |
| `logout.php` | Завершение сессии, выход из системы |

###  Публичная часть
| Файл | Назначение |
|------|------------|
| `index.php` | Главная страница с каталогом игр и фильтрацией по категориям |
| `game.php` | Детальная страница игры (описание, разработчик, цена, наличие) |

###  Корзина покупок
| Файл | Назначение |
|------|------------|
| `cart.php` | Просмотр корзины, удаление товаров, расчет общей стоимости |

###  Администрирование
| Файл | Назначение |
|------|------------|
| `admin.php` | Панель администратора: управление пользователями, добавление/удаление игр |
| `edit_game.php` | Редактирование существующей игры (все поля, замена изображения) |

###  Конфигурация
| Файл | Назначение |
|------|------------|
| `config/database.php` | Подключение к базе данных PostgreSQL |

###  Медиафайлы
| Папка | Назначение |
|-------|------------|
| `uploads/` | Хранение загруженных изображений игр |

### Стили
| Файл | Назначение |
|------|------------|
| `style.css` | Единый файл стилей для всех страниц |

---

##  База данных

### Основные таблицы:

**`users`** — пользователи системы
- `id` (PK) — уникальный идентификатор
- `username` — логин (уникальный)
- `email` — электронная почта (уникальная)
- `password_hash` — хеш пароля
- `role` — роль (`user` / `admin`)
- `created_at` — дата регистрации

**`games`** — каталог игр
- `id` (PK) — идентификатор игры
- `title` — название
- `description` — описание
- `price` — цена
- `category_id` (FK) — категория
- `developer` — разработчик
- `stock` — наличие на складе
- `image_url` — путь к изображению

**`categories`** — категории игр
- `id` (PK) — идентификатор
- `name` — название категории

**`cart`** — корзина покупок
- `user_id` (FK) — владелец корзины
- `game_id` (FK) — добавленная игра
- `quantity` — количество

---

##  Безопасность

- **Хеширование паролей** — алгоритм `PASSWORD_DEFAULT`
- **Защита от SQL-инъекций** — подготовленные запросы PDO
- **Защита от XSS** — экранирование вывода через `htmlspecialchars()`
- **Сессионная аутентификация** — проверка прав доступа на защищенных страницах
- **Валидация файлов** — проверка формата (JPG, PNG, GIF) и размера (до 5MB)

---

## Тестирование

### Регистрация
- Проверка уникальности логина и email
- Валидация формата email
- Минимальная длина пароля (6 символов)
- Подтверждение пароля

### Авторизация
- Корректная обработка неверного логина/пароля
- Постоянное время ответа (защита от timing-атак)

###  Корзина
- Добавление/удаление игр
- Синхронизация с базой данных
- Обновление счетчика в шапке

###  Админ-панель
- CRUD-операции с играми
- Загрузка и валидация изображений
- Управление пользователями (защита от удаления администраторов)


---

## Заключение

В результате системной и последовательной разработки был успешно создан полнофункциональный интернет-магазин компьютерных игр.
